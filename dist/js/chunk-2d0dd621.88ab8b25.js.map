{"version":3,"sources":["webpack:///./src/components/UserPage.vue?3d7f","webpack:///./src/components/userAnimeInfo.vue?b13e","webpack:///src/components/userAnimeInfo.vue","webpack:///./src/components/userAnimeInfo.vue?6eeb","webpack:///./src/components/userAnimeInfo.vue","webpack:///src/components/UserPage.vue","webpack:///./src/components/UserPage.vue?42bc","webpack:///./src/components/UserPage.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","model","value","callback","$$v","drawer","expression","name","on","$event","retour","_v","staticStyle","stopPropagation","connected","_s","userName","logout","nbTV","nbOAV","nbFilm","nbEp","mean","_l","item","index","key","anime","title","isInListPerso","mal_id","image_url","score","updateScore","staticRenderFns","ouvrirOverlay","img","titre","length","substring","added","loading","overlayVisibility","apiFetch","id","fermerOverlay","props","String","Number","Boolean","Array","components","InfoOverlay","loadingOverlay","data","methods","val","$emit","fetch","then","response","json","catch","err","console","log","$on","idToDel","component","VCard","VImg","VRating","userAnimeInfo","source","sessionStorage","getItem","idUser","JSON","parse","appelBool","listePerso","meanScore","k","nbInListe","i","Math","trunc","stat","tv","oav","film","episode","episodes","type","infoToUpdate","self","axios","post","animeID","newScore","indexToUpdate","error","delThisAnime2","idOfAnime","getMyNewList","idFromAnime","connect","setItem","session","user","connecte","$router","push","updateComment","newComment","commentaire","comment","$vuetify","theme","dark","VApp","VAppBar","VAppBarNavIcon","VBtn","VContent","VFooter","VIcon","VList","VListItem","VNavigationDrawer","VToolbarItems","VToolbar","VToolbarTitle"],"mappings":"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","file":"js/chunk-2d0dd621.88ab8b25.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"id\":\"inspire\"}},[_c('v-navigation-drawer',{staticClass:\"primary\",attrs:{\"app\":\"\",\"clipped\":\"\",\"width\":\"200\"},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[_c('v-list',[_c('v-list-item',{attrs:{\"to\":{name: 'Accueil'},\"color\":\"black\"},on:{\"click\":function($event){return _vm.retour()}}},[_c('div',{staticClass:\"d-flex flex-row align-center\"},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"home\")]),_c('h3',{staticClass:\"d-flex px-5\",staticStyle:{\"color\":\"white\"}},[_vm._v(\"Accueil\")])],1)])],1)],1),_c('v-app-bar',{staticClass:\"primary\",attrs:{\"app\":\"\",\"clipped-left\":\"\"}},[_c('v-app-bar-nav-icon',{on:{\"click\":function($event){$event.stopPropagation();_vm.drawer = !_vm.drawer}}}),_c('v-toolbar-title',[_vm._v(\"Site Tarby-Grégoire\")]),_c('div',{staticClass:\"flex-grow-1\"}),(!_vm.connected)?_c('v-toolbar-items',[_c('v-btn',{attrs:{\"color\":\"#f00000\"}},[_vm._v(\"Inscription\")]),_c('v-btn',{attrs:{\"color\":\"#f00000\"}},[_vm._v(\"Connexion\")])],1):_c('v-toolbar-items',[_c('v-btn',{staticClass:\"pr-12\",attrs:{\"color\":\"#f00000\"}},[_c('v-icon',{staticClass:\"px-1 mr-3\"},[_vm._v(\"mdi-account\")]),_vm._v(_vm._s(_vm.userName))],1),_c('v-btn',{attrs:{\"color\":\"#f00000\"},on:{\"click\":_vm.logout}},[_c('v-icon',{staticClass:\"px-1 \"},[_vm._v(\"mdi-close\")]),_vm._v(\"Deconnexion\")],1)],1)],1),_c('v-content',{staticClass:\"primary\"},[_c('v-card',{staticClass:\"primary d-flex justify-center\",attrs:{\"tile\":\"\"}},[_c('div',[_c('h1',{staticClass:\"d-flex justify-center\"},[_vm._v(_vm._s(_vm.userName))]),_c('h2',{staticClass:\"pb-5\"},[_vm._v(\"Liste de vos animes et statistiques.\")])])]),_c('div',{staticClass:\"d-flex flex-column mx-9 px-9\"},[_c('v-card',{staticClass:\"secondary mx-9 px-9\"},[_c('div',[_c('h1',{staticClass:\"d-flex justify-center \"},[_vm._v(\"Statistiques\")])]),_c('div',{staticClass:\"d-flex justify-space-around\"},[_c('h2',[_vm._v(\"TV: \"+_vm._s(_vm.nbTV))]),_c('h2',[_vm._v(\" OVA: \"+_vm._s(_vm.nbOAV))]),_c('h2',[_vm._v(\"Film: \"+_vm._s(_vm.nbFilm))]),_c('h2',[_vm._v(\"Episodes: \"+_vm._s(_vm.nbEp))]),_c('h2',[_vm._v(\"Score moyen: \"+_vm._s(_vm.mean)+\" \")])])]),_c('div',{staticClass:\"py-2\"}),_vm._l((_vm.listePerso),function(item,index){return _c('v-card',{key:index,staticClass:\"secondary d-flex flex-column mx-9 my-4\"},[_c('userAnimeInfo',{attrs:{\"titre\":item.anime.title,\"added\":_vm.isInListPerso(item.anime.mal_id),\"index\":index,\"img\":item.anime.image_url,\"score\":item.score,\"connected\":_vm.connected,\"id\":item.anime.mal_id},on:{\"updateScore\":_vm.updateScore}})],1)})],2)],1),_c('v-footer',{attrs:{\"app\":\"\"}},[_c('span',[_vm._v(\"© 2019\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-card',{staticClass:\" secondary d-flex align-center \"},[_c('v-card',{staticClass:\" secondary d-flex flex-row flex-grow-1 align-center \",on:{\"click\":function($event){return _vm.ouvrirOverlay()}}},[_c('div',{staticClass:\"d-flex px-12\"},[_c('v-img',{attrs:{\"align-end\":\"\",\"src\":_vm.img,\"width\":\"100\",\"height\":\"200\",\"raised\":\"true\"}})],1),(_vm.titre.length > 50)?_c('h2',{staticClass:\"d-flex text-justify mx-auto\"},[_vm._v(_vm._s(_vm.titre.substring(0,50))+\"...\")]):_c('h2',{staticClass:\"d-flex text-justify mx-auto\"},[_vm._v(_vm._s(_vm.titre))])]),_c('div',{staticClass:\"d-flex flex-column align-center pr-9 ml-9\"},[_c('v-rating',{attrs:{\"value\":_vm.added[1]/2,\"color\":\"amber\",\"half-increments\":\"\",\"hover\":\"\",\"size\":\"25\"},on:{\"input\":_vm.updateScore}}),_c('div',{staticClass:\"grey--text ml-4\"},[_vm._v(_vm._s(_vm.added[1]))])],1)],1),_c('loadingOverlay',{attrs:{\"loading\":_vm.loading}}),_c('InfoOverlay',{attrs:{\"overlayVisibility\":_vm.overlayVisibility,\"connected\":_vm.connected,\"data\":_vm.apiFetch,\"id\":_vm.id,\"added\":_vm.added},on:{\"fermerOverlay\":_vm.fermerOverlay}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <v-card class=\" secondary d-flex align-center \">\r\n        <v-card class=\" secondary d-flex flex-row flex-grow-1 align-center \" @click=\"ouvrirOverlay()\">\r\n            <div class=\"d-flex px-12\"><v-img align-end  v-bind:src=\"img\" width=\"100\" height=\"200\" raised=\"true\"></v-img></div>\r\n            <h2  class=\"d-flex text-justify mx-auto\" v-if=\"titre.length > 50\" >{{titre.substring(0,50)}}...</h2>\r\n            <h2 class=\"d-flex text-justify mx-auto\" v-else>{{titre}}</h2>\r\n        </v-card>\r\n            <div class=\"d-flex flex-column align-center pr-9 ml-9\">\r\n                <v-rating  v-on:input=\"updateScore\" :value=\"added[1]/2\" color=\"amber\" half-increments hover size=\"25\"></v-rating>\r\n                <div class=\"grey--text ml-4\">{{added[1]}}</div>\r\n            </div>\r\n    </v-card>\r\n    <loadingOverlay :loading=\"loading\"></loadingOverlay>\r\n    <InfoOverlay :overlayVisibility=\"overlayVisibility\" :connected=\"connected\" :data=\"apiFetch\" :id=\"id\" :added=\"added\" v-on:fermerOverlay=\"fermerOverlay\"></InfoOverlay>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport InfoOverlay from './InfoOverlay'\r\nimport loadingOverlay from './loadingOverlay'\r\nimport { bus } from '../main'\r\n\r\nexport default {\r\n  props: {\r\n    titre: String,\r\n    img: String,\r\n    score: Number,\r\n    id: Number,\r\n    index: Number,\r\n    connected: Boolean,\r\n    added: Array\r\n  },\r\n  components: {\r\n    InfoOverlay,\r\n    loadingOverlay\r\n  },\r\n  data: () => ({\r\n    overlayVisibility: false,\r\n    loading: false,\r\n    apiFetch: {}\r\n  }),\r\n  methods: {\r\n    updateScore: function (val) {\r\n      this.$emit('updateScore', [val * 2, this.id])\r\n    },\r\n    ouvrirOverlay () {\r\n      this.loading = true\r\n      fetch('https://api.jikan.moe/v3/anime/' + this.id).then(response => {\r\n        return response.json()\r\n      }).then(data => {\r\n        this.apiFetch = data\r\n        this.loading = false\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n      this.overlayVisibility = true\r\n    },\r\n    fermerOverlay () {\r\n      this.overlayVisibility = false\r\n    }\r\n  },\r\n  created () {\r\n    bus.$on('delThisAnime2', (idToDel) => {\r\n      if (idToDel === this.id) {\r\n        this.fermerOverlay()\r\n      }\r\n    })\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./userAnimeInfo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./userAnimeInfo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./userAnimeInfo.vue?vue&type=template&id=48e2ca4a&\"\nimport script from \"./userAnimeInfo.vue?vue&type=script&lang=js&\"\nexport * from \"./userAnimeInfo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRating } from 'vuetify/lib/components/VRating';\ninstallComponents(component, {VCard,VImg,VRating})\n","<template>\r\n <v-app id=\"inspire\">\r\n    <v-navigation-drawer v-model=\"drawer\" app clipped width=\"200\" class=\"primary\">\r\n    <v-list>\r\n      <v-list-item @click=\"retour()\" :to=\"{name: 'Accueil'}\" color=\"black\">\r\n          <div class=\"d-flex flex-row align-center\">\r\n            <v-icon color=\"white\">home</v-icon> <h3 class=\"d-flex px-5\" style=\"color: white;\">Accueil</h3>\r\n            </div>\r\n        </v-list-item>\r\n    </v-list>\r\n    </v-navigation-drawer>\r\n    <v-app-bar app clipped-left class=\"primary\">\r\n      <v-app-bar-nav-icon @click.stop=\"drawer = !drawer\"></v-app-bar-nav-icon>\r\n      <v-toolbar-title>Site Tarby-Grégoire</v-toolbar-title>\r\n       <div class=\"flex-grow-1\"></div>\r\n        <v-toolbar-items v-if=\"!connected\" >\r\n           <v-btn color=\"#f00000\">Inscription</v-btn>\r\n           <v-btn color=\"#f00000\">Connexion</v-btn>\r\n        </v-toolbar-items>\r\n        <v-toolbar-items v-else >\r\n           <v-btn color=\"#f00000\" class=\"pr-12\"><v-icon class=\"px-1 mr-3\">mdi-account</v-icon>{{userName}}</v-btn>\r\n           <v-btn color=\"#f00000\" @click=\"logout\"><v-icon class=\"px-1 \">mdi-close</v-icon>Deconnexion</v-btn>\r\n        </v-toolbar-items>\r\n    </v-app-bar>\r\n    <v-content class=\"primary\">\r\n      <v-card tile class=\"primary d-flex justify-center\">\r\n        <div><h1 class=\"d-flex justify-center\">{{userName}}</h1><h2 class=\"pb-5\">Liste de vos animes et statistiques.</h2></div>\r\n      </v-card>\r\n      <div class=\"d-flex flex-column mx-9 px-9\">\r\n        <v-card class=\"secondary mx-9 px-9\">\r\n          <div><h1 class=\"d-flex justify-center \">Statistiques</h1></div>\r\n          <div class=\"d-flex justify-space-around\"><h2>TV: {{nbTV}}</h2><h2> OVA: {{nbOAV}}</h2><h2>Film: {{nbFilm}}</h2><h2>Episodes: {{nbEp}}</h2><h2>Score moyen: {{mean}} </h2></div>\r\n        </v-card>\r\n        <div class=\"py-2\"></div>\r\n        <v-card class=\"secondary d-flex flex-column mx-9 my-4\" v-for=\"(item,index) in listePerso\" :key=\"index\">\r\n          <userAnimeInfo v-on:updateScore=\"updateScore\" :titre=\"item.anime.title\" :added=\"isInListPerso(item.anime.mal_id)\" :index=\"index\" :img=\"item.anime.image_url\" :score=\"item.score\" :connected=\"connected\" :id=\"item.anime.mal_id\"></userAnimeInfo>\r\n        </v-card>\r\n      </div>\r\n    </v-content>\r\n    <v-footer app>\r\n      <span>&copy; 2019</span>\r\n    </v-footer>\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\nimport userAnimeInfo from './userAnimeInfo'\r\nimport { bus } from '../main'\r\nimport Vue from 'vue'\r\n\r\nexport default {\r\n  components: {\r\n    userAnimeInfo\r\n  },\r\n  props: {\r\n    source: String\r\n  },\r\n  data: () => ({\r\n    nbTV: 0,\r\n    nbFilm: 0,\r\n    nbOAV: 0,\r\n    nbEp: 0,\r\n    mean: 0,\r\n    userName: sessionStorage.getItem('user'),\r\n    idUser: JSON.parse(sessionStorage.getItem('idUser')),\r\n    drawer: null,\r\n    connected: JSON.parse(sessionStorage.getItem('connecte')),\r\n    appelBool: false,\r\n    listePerso: []\r\n  }),\r\n  methods: {\r\n    meanScore: function () {\r\n      var k = 0\r\n      var nbInListe = 0\r\n      for (var i in this.listePerso) {\r\n        k += this.listePerso[i].score\r\n        nbInListe++\r\n      }\r\n      this.mean = Math.trunc(k / nbInListe)\r\n    },\r\n    stat: function () {\r\n      var tv = 0\r\n      var oav = 0\r\n      var film = 0\r\n      var episode = 0\r\n      for (var i in this.listePerso) {\r\n        episode += this.listePerso[i].anime.episodes\r\n        if (this.listePerso[i].anime.type === 'TV') {\r\n          tv++\r\n        } else if (this.listePerso[i].anime.type === 'Movie') {\r\n          film++\r\n        } else {\r\n          oav++\r\n        }\r\n      }\r\n      this.nbTV = tv\r\n      this.nbOAV = oav\r\n      this.nbEp = episode\r\n      this.nbFilm = film\r\n    },\r\n    updateScore: function (infoToUpdate) {\r\n      var self = this\r\n      if (self.idUser > 0) {\r\n        Vue.axios.post('/api/updateScore', {\r\n          id: self.idUser,\r\n          animeID: infoToUpdate[1],\r\n          newScore: infoToUpdate[0]\r\n        }).then(response => {\r\n          console.log(response.data)\r\n          self.listePerso[response.data.indexToUpdate].score = response.data.score\r\n          bus.$emit('updateOverlayInfo')\r\n          self.meanScore()\r\n        }).catch(function (error) {\r\n          console.log(error)\r\n        })\r\n      }\r\n    },\r\n    delThisAnime2: function (idOfAnime) {\r\n      var self = this\r\n      if (self.idUser > 0) {\r\n        Vue.axios.post('/api/delAnime', {\r\n          id: this.idUser,\r\n          animeID: idOfAnime\r\n        }).then(function (response) {\r\n          self.listePerso = response.data\r\n          self.stat()\r\n          self.meanScore()\r\n        }).catch(function (error) {\r\n          console.log(error)\r\n        })\r\n      }\r\n    },\r\n    getMyNewList: function () {\r\n      var self = this\r\n      if (self.idUser > 0) {\r\n        Vue.axios.post('/api/maListe', {\r\n          id: this.idUser\r\n        }).then(response => {\r\n          self.listePerso = response.data\r\n          self.meanScore()\r\n          self.stat()\r\n        }).catch(function (error) {\r\n          console.log(error)\r\n        })\r\n      }\r\n    },\r\n    isInListPerso: function (idFromAnime) {\r\n      for (var i in this.listePerso) {\r\n        if (idFromAnime === this.listePerso[i].anime.mal_id) {\r\n          return [true, this.listePerso[i].score]\r\n        }\r\n      }\r\n      return [false, 0]\r\n    },\r\n    async logout () {\r\n      // déconnecter l'utilisateur\r\n      var self = this\r\n      Vue.axios.post('/api/logout', {}).then(function (response) {\r\n        if (response.data.connect === 'false') {\r\n          sessionStorage.setItem('idUser', response.data.session.idUser)\r\n          sessionStorage.setItem('user', response.data.session.user)\r\n          sessionStorage.setItem('connecte', response.data.session.connecte)\r\n          self.$router.push('/')\r\n        }\r\n      }).catch(function (error) {\r\n        console.log(error)\r\n      })\r\n    },\r\n    updateComment: function (newComment) {\r\n      var self = this\r\n      if (self.idUser > 0) {\r\n        Vue.axios.post('/api/updateComment', {\r\n          id: self.idUser,\r\n          animeID: newComment[1],\r\n          newComment: newComment[0]\r\n        }).then(response => {\r\n          self.listePerso[response.data.indexToUpdate].commentaire = response.data.comment\r\n          bus.$emit('updateOverlayInfo')\r\n        }).catch(function (error) {\r\n          console.log(error)\r\n        })\r\n      }\r\n    },\r\n    retour () {\r\n    }\r\n  },\r\n\r\n  created () {\r\n    if (sessionStorage.getItem('idUser') === null) {\r\n      sessionStorage.setItem('idUser', -1)\r\n      sessionStorage.setItem('user', '')\r\n      sessionStorage.setItem('connecte', false)\r\n    }\r\n    this.$vuetify.theme.dark = true\r\n    this.getMyNewList()\r\n\r\n    bus.$on('delThisAnime2', (idToDel) => {\r\n      this.delThisAnime2(idToDel)\r\n    })\r\n    bus.$on('updateScoreFromOverLay', (val) => {\r\n      this.updateScore([val[0], val[1]])\r\n    })\r\n    bus.$on('updateComment', (val) => {\r\n      this.updateComment([val[0], val[1]])\r\n    })\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserPage.vue?vue&type=template&id=fb91ba68&\"\nimport script from \"./UserPage.vue?vue&type=script&lang=js&\"\nexport * from \"./UserPage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VAppBar } from 'vuetify/lib/components/VAppBar';\nimport { VAppBarNavIcon } from 'vuetify/lib/components/VAppBar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VContent } from 'vuetify/lib/components/VContent';\nimport { VFooter } from 'vuetify/lib/components/VFooter';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VToolbarItems } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VApp,VAppBar,VAppBarNavIcon,VBtn,VCard,VContent,VFooter,VIcon,VList,VListItem,VNavigationDrawer,VToolbarItems,VToolbarTitle})\n"],"sourceRoot":""}